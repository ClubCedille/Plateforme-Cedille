# Iteration 1 Retrospective

Date: October 11, 2023

## 1. Completed Work

| Task | Responsible |
| ------------------------------------------- | ----------------------------------- |
| Prepare client-specific questionnaires | Jonathan / Thomas |
| AlgoETS interview | Jonathan |
| Club member interviews | Thomas / Jonathan |
| Raconteurs d'angles club interview | Jonathan |
| Saveurs de g√©nie club interview | Jonathan |
| IT services interview | Thomas |
| Define success metrics from interviews | Jonathan / Thomas / Simon / Michael |
| Deploy the physical cluster with Talos/Omni | Michael / Simon |
| Basic Rook/Ceph configuration | Michael / Simon |
| Evaluate k8s networking stack | Simon |
| Set up a wiki for documentation | Jonathan |
| Initial drafting of the vision document | Jonathan / Thomas / Simon / Michael |
| Migrate physical servers to the server room | Simon / Jonathan / Thomas |
| KubeVirt configuration | Thomas |

## 2. Incomplete Work

### 2.1 In Progress

- **Purchase of new disks**: Our needs assessment has been completed, and the
  request to IT is about to be sent.

### 2.2 Will Not Be Done

- **Add networking for Terraform XCP-NG provider**: We decided not to use XCP-NG
  as a hypervisor for our servers. This decision was made to minimize
  infrastructure complexity, and there was not enough added value to justify
  this configuration. We opted for the Vcluster tool as an alternative to
  configure different virtual environments within our Kubernetes cluster.

## 3. Issues and Challenges

- **Kubernetes/Talos Cluster Installation (bootstrap)**: Installation of Talos
  Linux OS from the ISO generated by Sidero Omni and cluster creation with all
  machines.
  - **Issue**: Inability to decrypt disks during the first boot after machine
    installation.
    - **Cause**: Unfortunately, after several reinstalls, we could not identify
      the cause.
    - **Solution**: Disable the encryption option before installation.
  - **Issue**: Installation breaks as soon as the USB key is removed from the
    machine after installation.
    - **Cause**: The disk identifier with the OS `/dev/sdb` is no longer valid
      if the USB key is removed.
    - **Solution**: Reinstall the cluster specifying durable disk identifiers
      (`/dev/disk/by-id/...`) for _each_ machine.

- **ISO/image configuration in a PVC for KubeVirt**: Use an Ubuntu ISO in a PVC
  as a CD-ROM during VM boot.
  - **Solution**: Install the
    [CDI](https://kubevirt.io/user-guide/operations/containerized_data_importer/)
    from KubeVirt, which allows importing disk images from a web server or
    container registry, cloning existing persistent volumes, and downloading
    local disk images, all to a DataVolume. It simplifies and optimizes the use
    of Persistent Volume Claims (PVCs) as disks for virtual machines.

- **Initial Rook-Ceph Installation**: Initial installation of rook-ceph
  (distributed file system) as a proof of concept on our Kubernetes cluster.
  - **Issue**: The Ceph cluster is unusable.
  - **Cause**: OSD (Object Storage Daemons) configuration fails.
  - **Solution**: Manually wipe all disks and restart the rook-ceph operator.

- **Problem 2**: Detailed description of the problem and its impact.
  - **Envisioned Solution**: Description of the solution or steps to resolve the
    problem.
- **Challenge 3**: Description of the challenge and why it was an obstacle.
  - **Envisioned Solution**: Measures or steps to overcome this challenge in the
    future.
